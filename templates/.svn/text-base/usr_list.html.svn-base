{% extends "base_site.html" %}
{% block content %}


<script language=javascript>
    var tDiv; // 提示信息div
        var flag = false; // 是否隐藏提示标志

        /**
        * 显示提示信息
        */
    function showTitle(div_id,info){
      tDiv = document.getElementById(div_id);
      tDiv.innerHTML = info;
      tDiv.className = 'tDiv';
      tDiv.style.display = '';
      flag = false;
    }

        /**
        * 隐藏提示信息
        */
    function hideTitle( ){
      if (!flag) {
                tDiv.style.display = 'none';
      }
    }


</script>

        	<div class="conment-title">
            	<table border="0" cellspacing="0" cellpadding="0">
                  <tr>
           <!--         <td class="new"><a href="">审批</a></td>-->
                    <td class="refresh"><a href="/usrlist">刷新</a></td>
                    <td class="delete"><a href="#" onclick="deleteuser('username','formuser','/userdel/')">删除</a></td>
                   
                  </tr>
                </table>            	
            </div>
            
            <div class="conment-div">
            	
                <div class="div">
                    <table  width="100%" border="0" cellspacing="0" cellpadding="0">
                      <tr>
                        <td width="5" background="../media/images/table/table_l.gif"></td>
                        <td>
													<form id='formuser' action="" method="post"> {% csrf_token %}	
                        	<table id="tbuserinfo" width="100%" border="0" cellspacing="0" cellpadding="0" class="table">                            
                              <thead>
                                    <tr><th width="3%"><div class="th_div"><span><input id="checkall" name="" type="checkbox" value="" class="a_input" onclick="CheckTitle('username','checkall')"/></span><span class="rt"></span></div></th>
                                    <th width="15%"><span>用户姓名</span></th>
                                    <th width="15%"><span>注册邮箱</span></th>
									<th width="15%"><span>已激活</span></th>
                                    <th width="15%"><span>状态</span></th>
                                    <th width="15%"><span>是否管理员</span></th>
                                  <!--  <th width="15%"><span>用户组</span></th> -->
                                                                                                
																		<th width="10%" ><span>管理</span></th>
																	</thead>
																	<tfoot>

																		</tfoot>

                              <tbody>
																	{% if userlist %}
																	{% for auser in userlist.object_list %}
																	<tr class="{% cycle 'bg-color-a' 'bg-color-b' %}">
																		<td class="txc">
																		{% if auser.user_admin == 'false' %}
																		{% if auser.user_confirmed == 'false' %}
																		<input name="username" type="checkbox" value="{{auser.user_userName}}" />
																		{% else %}
                                                                        <input name="username" type="checkbox" disabled="disabled" value="{{auser.user_userName}}" />
																		{% endif %}
                                                                        {% endif %}
																		</td>
																		<td  class="txc"> 
																		<a href = '/userinfo/{{ auser.user_userName }}' onmouseover='showTitle("{{ auser.user_userName }}","单击用户名，查看用户详细信息")' onmouseout='setTimeout("hideTitle()",10)' >{{auser.user_userName}}</a><div id="{{ auser.user_userName }}"> </div>
																		</td>

																		<td  class="txc">{{auser.user_email}}</td>
																		<td  class="txc">{% if auser.user_enabled == 'true' %}
																		     <span> 是 </span>
																			 {% else %}
																			 <span> 否 </span>
																			 {% endif %}
																		</td>
																		<td  class="txc"> {% if auser.user_enabled == 'false' %}
																		     <span > 禁用 </span>
																		     {% else %}	
																			 {% if auser.user_confirmed == 'true' %}
																		      <span > 活跃 </span>
																			  {% else %}
																			  <span> 未登录 </span>
																			  {% endif %}
																		     {% endif %}
                                     </td>

                                     <td  class="txc">
																	     	{% if auser.user_admin == 'true' %}
																		    <span > 是 </span>
                                        {% else %}
                                        <span > 否 </span>
																		    {% endif %}	
																		</td>

                                    <!--   <td>
                                    <span > {{ auser.user_groups }}</span>
                                    </td> -->

																		<td  class="txc">
																		<center>
																		{% if auser.user_admin == 'false' %}
																			{% if auser.user_enabled == 'true' %}
<!--																	 			<a href="/userdisable/{{auser.user_userName}}" >Disable </a>				-->														
								<button onmouseover='showTitle("{{ auser.user_userName }}.enable","禁用")' onmouseout='setTimeout("hideTitle()",10)' onclick="submit_form('formuser','/userdisable/{{auser.user_userName}}/')"><img src="../media/images/jy.gif"> <div id="{{ auser.user_userName }}.enable"></div></button>
																			{% else %}
<!--																			<a href="/userenable/{{auser.user_userName}}" >Enable </a>-->
								<button onmouseover='showTitle("{{ auser.user_userName }}.disable","启用")' onmouseout='setTimeout("hideTitle()",10)' onclick="submit_form('formuser', '/userenable/{{auser.user_userName}}/')"><img src="../media/images/qy.gif"> <div id="{{ auser.user_userName }}.disable"></div></button>
																			{% endif %}
					<!--														<a href="/userdelone/{{ auser.user_userName}}">delete </a>-->
																	{% endif%}
																	</center>
																	</td>
                                  </tr>
																	{% endfor %}
																	{% endif %}
                              </tbody>
														</table>
												</form>	
                        </td>
                        <td width="5" background="../media/images/table/table_r.gif"></td>
                      </tr>
                      <tr>
                        <td width="5" height="28" background="../media/images/table/table_bl.gif"></td>
                        <td background="../media/images/table/table_bc.gif" height="28">
                        	<div class="div_page">
                            	<div class="total">共有 <span>{{ num }}</span> 条记录，<span class="current">当前第 <b>
{% if userlist %}
{{userlist.number}}/{{userlist.paginator.num_pages}}
{% else%}
1/1
{% endif %}
</b> 页 </span></div>
 {% if not page_num == 1%}              
                <div class="bn_bn">
{% if userlist %}
  {% ifequal userlist.number 1 %}
	<span class="color_a">首页</a></span>
  {% else %}
    <span class="color_a"><a href="?page=1">首页</a></span>
  {% endifequal %}
{% endif %}

{% if userlist.has_previous %}
<a href="?page={{ userlist.previous_page_number }}">上一页</a>
{% endif %}

<span>
{% for p in page_range %}
  {% if userlist %}
	  {% ifequal p userlist.number %}
	   <span> {{ p }} </span>
	  {% else %}
	    <a href="?page={{ p }}" title="第{{ p }}页">{{p}}</a>
	  {% endifequal %}
  {% else %}
          <span> {{ p }} </span>
  {% endif %}
{% endfor %}
</span>

{% if userlist.has_next %}
   <a href="?page={{ userlist.next_page_number }}">下一页</a>
   <a href="?page={{userlist.paginator.num_pages}}">尾页</a>
{% else%}
   <span class="color_a">尾页&nbsp;</a></span>   
{% endif %}


{% if userlist %}
第<input name="goto" id="goto" class="input" type="text" style="ime-mode:Disabled" onkeydown=" return goto_page(event)"/>页
<input type="button" name="turn_page" id="turn_page" class="switch_bn" value="转到" onclick="javascript:GoPage('goto',{{ userlist.paginator.num_pages }},'/usrlist/')"/>
{% else %}
到第<input name="goto" id="goto" class="input" type="text" style="ime-mode:Disabled" onkeydown=" return goto_page(event)"/>页<input type="button" name="turn_page" id="turn_page" class="switch_bn" value="转到" onclick="javascript:GoPage('goto',1,'/usrlist/')"/>
{% endif %}
</span>
		</div>
		{% endif %}


                            	<div class="clear"></div>
                            </div>
                        </td>
                        <td width="5" background="../media/images/table/table_br.gif">&nbsp;</td>
                      </tr>
                    </table>
                </div>
                
            </div>
            
        </div>
{% endblock %}

