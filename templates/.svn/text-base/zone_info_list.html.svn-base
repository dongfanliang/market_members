{% extends "base_site.html" %}
{% block content %}


<div class="conment">
        	<div class="conment-title">
					<table border="0" cellspacing="0" cellpadding="0">
					<tr>
						<td class="refresh"><a href="/zoneinfo/">刷新</a></td>
               </tr>
               </table>
            </div>
        	           
            <div class="conment-div">
            	
                <div class="div">
                	
                                                              
                        	<table width="100%" border="0" cellspacing="0" cellpadding="0" class="tab">                            
                 {% for zone in zones.object_list%}                              
                                    <tr>
                                      <th width="15%" style="vertical-align:middle; text-align:center;">区域名称/IP地址：</th>
                                      	<td colspan="4"> 
                                      		<strong> {{ zone.cluster_name }}/{{ zone.host_name }}</strong>
                                      	
										</td>
										</tr>
										<tr>
									  <th width="15%" style="vertical-align:middle; text-align:center;">资源使用情况：</th>
									    <td colspan="4">
										    <a href="/infozone_{{zone.cluster_name}}">查看</a>
                                            <input type="hidden" value="{{zone.cluster_name}}"/>
										</td>
												</tr>	
                              <tbody >
                         {% if nodes %}
                                  <tr>
                                   
                              <td colspan="5" align="center"><strong>物理节点列表</strong></td>
                              <!--      <td><a href="/addnode/">添加</a></td> -->
                              
                                  </tr>
                                  		<tr>													
                                  		<td class="th－bg" align="center">物理节点名称</td>
                                  		<td class="th－bg" align="center">ip地址</td>
                                  	<!--	<td class="th－bg" align="center">运行状态</td>-->
                                  		<td class="th－bg" align="center">运行的虚拟机</td>
                                  		<td class="th－bg" align="center">操作</td>
                                  </tr>
                                 {% endif %}
										{% for node in nodes %}
										{% if node.zone == zone.cluster_name %}
										<tr class="bg-color-b">
                                    <td width="20%" align="center">物理节点{{ forloop.counter }}</td>
                                    <td width="25%" align="center">{{ node.ipaddr }}</td>
                                  <!--  <td width="10%">running</td>-->
                                    <td width="40%" align="center">
                                    	{% for instance in node.instances %}
                                    		<a href = '/instance_info_{{ instance }}' onmouseover='showTitle("{{ instance }}","查看虚拟机详细信息")' onmouseout='setTimeout("hideTitle()",10)' >{{ instance }} &nbsp;</a>
                                    	{% endfor %}
                                    </td>
                                    <td>
                              <!-- <a href="/zoneinfo">删除</a>&nbsp;-->
                                    <a href="/viewnode_{{node.ipaddr}}">查看</a></td>
                                  </tr>
											{% endif %}
										{% endfor %}
                      
                 {% endfor %}
                               
                              </tbody>
                            </table>
                
                    <!--    	<table width="100%" border="0" cellspacing="0" cellpadding="0" class="table">                            
                              <thead>
                                    <tr>
                                      <th colspan="2">自由的物理节点列表</th>
                                      <th ><a href="/confnode">添加新的物理节点到云中</a></th>
                              <tbody>
                                  <tr class="bg-color-a">
                                    <td width="208">物理节点7</td>
                                    <td width="214">IP地址</td>
                                    <td><a href="/listzone">添加到区域</a>&nbsp;<a href="/zoneinfo">删除</a></td>
                                  </tr>
                                  
                                  <tr class="bg-color-a">
                                    <td>物理节点8</td>
                                    <td>IP地址</td>
                                    <td><a href="/listzone">添加到区域</a>&nbsp;<a href="/zoneinfo">删除</a></td>
                                  </tr>
                                  <tr class="bg-color-b">
                                    <td>物理节点9</td>
                                    <td>IP地址</td>
                                    <td><a href="/listzone">添加到区域</a>&nbsp;<a href="/zoneinfo">删除</a></td>
                                  </tr>
                              </tbody>
                            </table>-->
                        <div class="div_page">
                            	<div class="total">共有 <span>{{ num }}</span> 条记录，<span class="current">当前第 <b>
{% if zones %}
{{zones.number}}/{{zones.paginator.num_pages}}
{% else%}
1/1
{% endif %}
</b> 页 </span></div>
 {% if not page_num == 1%}              
                <div class="bn_bn">
{% if zones %}
  {% ifequal zones.number 1 %}
	<span class="color_a">首页</a></span>
  {% else %}
    <span class="color_a"><a href="?page=1">首页</a></span>
  {% endifequal %}
{% endif %}

{% if zones.has_previous %}
<a href="?page={{ zones.previous_page_number }}">上一页</a>
{% endif %}

<span>
{% for p in page_range %}
  {% if zones %}
	  {% ifequal p zones.number %}
	   <span> {{ p }} </span>
	  {% else %}
	    <a href="?page={{ p }}" title="第{{ p }}页">{{p}}</a>
	  {% endifequal %}
  {% else %}
          <span> {{ p }} </span>
  {% endif %}
{% endfor %}
</span>

{% if zones.has_next %}
   <a href="?page={{ zones.next_page_number }}">下一页</a>
   <a href="?page={{zones.paginator.num_pages}}">尾页</a>
{% else%}
   <span class="color_a">尾页&nbsp;</a></span>   
{% endif %}


{% if zones %}
第<input name="goto" id="goto" class="input" type="text" style="ime-mode:Disabled" onkeydown=" return goto_page(event)"/>页<input type="button" class="switch_bn" value="转到"  name="turn_page" id="turn_page" onclick="javascript:GoPage('goto',{{ zones.paginator.num_pages }},'/listzone/')"/>
{% else %}
到第<input name="goto" id="goto" class="input" type="text" style="ime-mode:Disabled" onkeydown=" return goto_page(event)"/>页<input type="button" class="switch_bn" value="转到"  name="turn_page" id="turn_page" onclick="javascript:GoPage('goto',1,'/listzone/')"/>
{% endif %}
</span>
		</div>
		{% endif %}

                        	
                            	<div class="clear"></div>
                            </div>
                                          
                </div>                
            </div>
        </div>
    </div>
  
</div>
{% endblock %}
